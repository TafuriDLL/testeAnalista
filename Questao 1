-- Criando o banco de dados
CREATE DATABASE GERENCIA;
USE GERENCIA;

-- Tabela FUNCIONARIO
CREATE TABLE FUNCIONARIO(
    ID INT NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(50),
    CARGO VARCHAR(50),
    DEPARTAMENTO VARCHAR(20),
    CONSTRAINT PK_FUNCIONARIO PRIMARY KEY (ID)
);

-- Tabela PROJETO
CREATE TABLE PROJETO(
    ID INT NOT NULL AUTO_INCREMENT,
    NOME_DO_PROJETO VARCHAR(60),
    DATA_INICIO DATE,
    DATA_TERMINO DATE,
    CONSTRAINT PK_PROJETO PRIMARY KEY (ID)
);

-- Tabela ATRIBUICAO
CREATE TABLE ATRIBUICAO(
    CODIGO INT NOT NULL AUTO_INCREMENT,
    FUNCIONARIO_ID INT,
    PROJETO_ID INT,
    HORAS_TRABALHADAS FLOAT NOT NULL DEFAULT 0,
    CONSTRAINT PK_ATRIBUICAO PRIMARY KEY (CODIGO),
    CONSTRAINT FK_ATRIBUICAO_FUNCIONARIO FOREIGN KEY (FUNCIONARIO_ID) REFERENCES FUNCIONARIO(ID),
    CONSTRAINT FK_ATRIBUICAO_PROJETO FOREIGN KEY (PROJETO_ID) REFERENCES PROJETO(ID)
);

-- Tabela TAREFAS
CREATE TABLE TAREFAS(
    ID INT NOT NULL AUTO_INCREMENT,
    NOME_TAREFA VARCHAR(100) NOT NULL,
    PROJETO_ID INT,
    FUNCIONARIO_ID INT,
    DATA_INICIO DATE,
    DATA_FIM DATE,
    ATIVO BOOLEAN,
    CONSTRAINT PK_TAREFAS PRIMARY KEY (ID),
    CONSTRAINT FK_TAREFAS_FUNCIONARIO FOREIGN KEY (FUNCIONARIO_ID) REFERENCES FUNCIONARIO(ID),
    CONSTRAINT FK_TAREFAS_PROJETO FOREIGN KEY (PROJETO_ID) REFERENCES PROJETO(ID)
);
